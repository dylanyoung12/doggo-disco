webpackJsonp([1],{"1/oy":function(e,t){},"8bpR":function(e,t){},"9M+g":function(e,t){},ACHv:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("/5sW"),o=r("e6fC"),s={name:"AppHeader",data:function(){return{username:"",password:""}},computed:{user:function(){return this.$store.getters.user},loggedIn:function(){return this.$store.getters.loggedIn},loginError:function(){return this.$store.getters.loginError}},methods:{login:function(){var e=this;this.$store.dispatch("login",{username:this.username,password:this.password}).then(function(t){e.email="",e.password=""})},logout:function(){document.body.className="",this.$store.dispatch("logout"),this.$router.push({path:"/"})},toFavorites:function(){this.$router.push({path:"/favorites"})},toHome:function(){this.$router.push({path:"/"})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light",attrs:{id:"menu"}},[r("a",{staticClass:"nav-item nav-link",on:{click:e.toHome}},[e._v("Home")]),e._v(" "),e.loggedIn?r("a",{staticClass:"nav-item nav-link mr-auto",on:{click:e.toFavorites}},[e._v("Favorites")]):e._e(),e._v(" "),e.loggedIn?r("span",{staticClass:"nav-item navbar-text"},[e._v(e._s(e.user.username)+" ")]):e._e(),e._v(" "),e.loggedIn?r("a",{staticClass:"nav-item nav-link",attrs:{href:"#"},on:{click:e.logout}},[e._v("Logout")]):r("div",{staticClass:"nav-item ml-auto"},[r("form",{staticClass:"navbar-form",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{placeholder:"Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),r("button",{staticClass:"primary",attrs:{type:"submit"}},[e._v("Login")])])])]),e._v(" "),r("div",{staticClass:"flexWrapper errorPlace"},[e.loginError?r("p",{staticClass:"flexRight error"},[e._v(e._s(e.loginError))]):e._e()])])},staticRenderFns:[]};var i={name:"App",components:{AppHeader:r("VU/8")(s,a,!1,function(e){r("8bpR")},"data-v-038d2c8b",null).exports},created:function(){this.$store.dispatch("getAllBreeds")}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("app-header"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=r("VU/8")(i,c,!1,function(e){r("zbdV")},null,null).exports,l=r("/ocq"),m=r("NYxO"),d=r("mtWM"),v=r.n(d);n.a.use(m.a);var g=function(){return{headers:{Authorization:localStorage.getItem("token")}}},f=new m.a.Store({state:{user:{},token:"",loginError:"",registerError:"",breeds:{},current:"",favorites:{}},getters:{user:function(e){return e.user},getToken:function(e){return e.token},loggedIn:function(e){return""!==e.token},loginError:function(e){return e.loginError},registerError:function(e){return e.registerError},breeds:function(e){return e.breeds},current:function(e){return e.current},favorites:function(e){return e.favorites}},mutations:{setUser:function(e,t){e.user=t},setToken:function(e,t){e.token=t,""===t?localStorage.removeItem("token"):localStorage.setItem("token",t)},setLoginError:function(e,t){e.loginError=t},setRegisterError:function(e,t){e.registerError=t},setBreeds:function(e,t){e.breeds=t},setCurrent:function(e,t){e.current=t},setFavorites:function(e,t){e.favorites=t}},actions:{initialize:function(e){var t=localStorage.getItem("token");t&&v.a.get("/api/me",g()).then(function(r){e.commit("setToken",t),e.commit("setUser",r.data.user)}).catch(function(t){localStorage.removeItem("token"),e.commit("setUser",{}),e.commit("setToken","")})},register:function(e,t){v.a.post("/api/users",t).then(function(t){e.commit("setUser",t.data.user),e.commit("setToken",t.data.token),e.commit("setRegisterError",""),e.commit("setLoginError","")}).catch(function(t){e.commit("setLoginError",""),e.commit("setUser",{}),e.commit("setToken",""),t.response?409===t.response.status&&e.commit("setRegisterError","That user name is already taken."):e.commit("setRegisterError","Sorry, your request failed. We will look into it.")})},login:function(e,t){v.a.post("/api/login",t).then(function(t){e.commit("setUser",t.data.user),e.commit("setToken",t.data.token),e.commit("setRegisterError",""),e.commit("setLoginError","")}).catch(function(t){if(e.commit("setUser",{}),e.commit("setToken",""),e.commit("setRegisterError",""),t.response)return 403!==t.response.status&&400!==t.response.status||e.commit("setLoginError","Invalid login."),void e.commit("setRegisterError","");e.commit("setLoginError","Sorry, your request failed. We will look into it.")})},logout:function(e,t){e.commit("setUser",{}),e.commit("setToken",""),e.commit("setCurrent","")},getAllBreeds:function(e){fetch("https://dog.ceo/api/breeds/list/all").then(function(e){return e.json()}).then(function(t){e.commit("setBreeds",t.message)}).catch(function(e){console.log("Error retrieving breeds",e)})},getBreed:function(e,t){if(!t.breed)return res.status(400).send();var r=t.breed;if(""!==t.subBreed){var n=t.subBreed;fetch("https://dog.ceo/api/breed/"+r+"/"+n+"/images/random").then(function(e){return e.json()}).then(function(t){e.commit("setCurrent",t.message)}).catch(function(e){console.log("Error getting image",e)})}else fetch("https://dog.ceo/api/breed/"+r+"/images/random").then(function(e){return e.json()}).then(function(t){e.commit("setCurrent",t.message)}).catch(function(e){console.log("Error getting image",e)})},getRandom:function(e){fetch("https://dog.ceo/api/breeds/image/random").then(function(e){return e.json()}).then(function(t){e.commit("setCurrent",t.message)}).catch(function(e){console.log("Error getting image",e)})},getFavorites:function(e){return v.a.get("/api/users/"+e.state.user.id+"/favorites").then(function(t){e.commit("setFavorites",t.data.favorites)}).catch(function(e){console.log("getFavorites failed:",e)})},addFavorite:function(e,t){v.a.post("/api/users/"+e.state.user.id+"/favorites",t,g()).then(function(t){return e.dispatch("getFavorites")}).catch(function(e){console.log("addFavorite failed:",e)})},removeFavorite:function(e,t){return v.a.delete("/api/users/"+e.state.user.id+"/favorites/"+t.id,g()).then(function(t){e.dispatch("getFavorites")}).catch(function(e){console.log("remove failed:",e)})}}}),p={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[r("h1",[e._v("Are You Ready to Disco?")]),e._v(" "),r("h2",[e._v("Get signed up to join the party!")]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("div",{staticClass:"form-group"},[r("p",[e._v("1. Choose a user name (this is how you will log in).")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"narrow",attrs:{placeholder:"User Name"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("p",[e._v("2. Create an account.")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"wide",attrs:{placeholder:"First and Last Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),r("br"),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"narrow",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),r("button",{staticClass:"alternate",attrs:{type:"submit"}},[e._v("Register")])])]),e._v(" "),r("p",{staticClass:"error"},[e._v(e._s(e.registerError))])])},staticRenderFns:[]};var h=r("VU/8")({name:"WelcomePage",data:function(){return{username:"",password:"",name:""}},computed:{registerError:function(){return this.$store.getters.registerError}},methods:{register:function(){this.$store.dispatch("register",{username:this.username,password:this.password,name:this.name})}}},p,!1,function(e){r("c2hg")},"data-v-607ce7d9",null).exports,_=r("fZjL"),b=r.n(_),C={name:"Search",data:function(){return{selected:"",subSelected:""}},computed:{breeds:function(){return b()(this.$store.getters.breeds)},subBreeds:function(){return""===this.selected?[]:this.$store.getters.breeds[this.selected]===[]?[]:this.$store.getters.breeds[this.selected]}},watch:{selected:function(){this.subSelected=""}},methods:{toUpper:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},getDoggo:function(){this.$store.dispatch("getBreed",{breed:this.selected,subBreed:this.subSelected})},getRandom:function(){this.$store.dispatch("getRandom")}}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"search"}},[r("form",{on:{submit:function(t){return t.preventDefault(),e.getDoggo(t)}}},[r("div",{staticClass:"form-group"},[r("label",[e._v("Select a breed of dog: ")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"form-control w-75",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?r:r[0]}}},e._l(e.breeds,function(t){return r("option",{domProps:{value:t}},[e._v("\n          "+e._s(e.toUpper(t))+"\n        ")])}))]),e._v(" "),e.subBreeds.length>0?r("div",{staticClass:"form-group"},[r("label",[e._v("Select Sub-breed: ")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.subSelected,expression:"subSelected"}],staticClass:"form-control w-50",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.subSelected=t.target.multiple?r:r[0]}}},e._l(e.subBreeds,function(t){return r("option",{domProps:{value:t}},[e._v("\n          "+e._s(e.toUpper(t))+"\n        ")])}))]):e._e(),e._v(" "),r("button",{staticClass:"btn btn-lg",attrs:{type:"submit"}},[e._v("Submit")])]),e._v(" "),r("br"),r("br"),e._v(" "),r("div",{staticClass:"container"},[r("p",[e._v("Or, "),r("button",{staticClass:"btn",attrs:{id:"randomBreed"},on:{click:function(t){return t.preventDefault(),e.getRandom(t)}}},[e._v("Choose a Random Dog")])])])])},staticRenderFns:[]},E=r("VU/8")(C,w,!1,null,null,null).exports,k={name:"DanceFloor",data:function(){return{dogName:"",nameError:!1,audio:new Audio("../../static/Shake_Shake_Shake.mp3")}},beforeCreate:function(){document.body.className="danceTime"},mounted:function(){var e=this.$refs.doggo,t=0,r=null;requestAnimationFrame(function n(o){null!==r&&(t+=.001*(o-r)),r=o,e.style.top=25*Math.sin(4*t)+25+"%",e.style.left=25*Math.cos(t)+30+"%",requestAnimationFrame(n)}),document.body.className="danceTime",this.audio.play()},computed:{current:function(){return this.$store.getters.current}},beforeDestroy:function(){document.body.className="",this.audio.pause()},methods:{save:function(){var e=this;""!==this.dogName?(this.nameError=!1,this.$store.dispatch("addFavorite",{name:this.dogName,path:this.current}).then(function(t){e.dogName=""})):this.nameError=!0},stop:function(){this.$store.commit("setCurrent","")}}},y={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"container",attrs:{id:"danceFloor"}},[r("img",{ref:"doggo",attrs:{id:"doggo",src:e.current}})]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.save(t)}}},[r("div",{staticClass:"form-group"},[r("label",[e._v("Like this doggo? Give it a name and save it for later!")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.dogName,expression:"dogName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Name"},domProps:{value:e.dogName},on:{input:function(t){t.target.composing||(e.dogName=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"btn",attrs:{type:"submit"}},[e._v("Save")]),e._v(" "),e.nameError?r("small",{staticClass:"sm"},[e._v(" Please select a name for your doggo")]):e._e()]),e._v(" "),r("br"),e._v(" "),r("div",[r("small",{staticClass:"sm"},[e._v("Need a break from dancing? "),r("button",{staticClass:"btn btn-sm",on:{click:e.stop}},[e._v("Stop the Music")])])])])},staticRenderFns:[]};var $=r("VU/8")(k,y,!1,function(e){r("O6Qb")},null,null).exports,F={name:"HomePage",components:{WelcomePage:h,Search:E,DanceFloor:$},computed:{loggedIn:function(){return this.$store.getters.loggedIn},danceTime:function(){return""!==this.$store.getters.current}}},N={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.loggedIn?t("div",[t("search")],1):t("div",[t("welcome-page")],1),this._v(" "),this.danceTime?t("div",[t("dance-floor")],1):this._e()])},staticRenderFns:[]};var R=r("VU/8")(F,N,!1,function(e){r("ACHv")},"data-v-4431c2eb",null).exports,S={name:"Favorites",components:{DanceFloor:$},computed:{favorites:function(){return this.$store.getters.favorites},loggedIn:function(){return this.$store.getters.loggedIn},danceTime:function(){return""!==this.$store.getters.current}},methods:{setCurrent:function(e){this.$store.commit("setCurrent",e.path)},remove:function(e){this.$store.dispatch("removeFavorite",e)},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}}},x={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loggedIn?r("div",[e.isEmpty(e.favorites)?r("h3",[e._v("Your favorite doggos will appear here")]):e._e(),e._v(" "),e._l(e.favorites,function(t){return r("ul",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item"},[r("h3",[e._v(e._s(t.name))]),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row align-items-center justify-content-around"},[r("div",{staticClass:"col text-center"},[r("img",{staticClass:"portrait",attrs:{src:t.path}})]),e._v(" "),r("div",{staticClass:"col text-center"},[r("button",{staticClass:"btn",on:{click:function(r){e.setCurrent(t)}}},[e._v("Dance with "+e._s(t.name)+"!")]),e._v(" "),r("button",{staticClass:"btn btn-sm",on:{click:function(r){e.remove(t)}}},[e._v("Remove from favorites")])])])])])])})],2):r("div",[r("h2",[e._v("Please sign in or register for an account")])]),e._v(" "),e.danceTime?r("div",[r("dance-floor")],1):e._e()])},staticRenderFns:[]};var U=r("VU/8")(S,x,!1,function(e){r("YgWk")},"data-v-3641fe64",null).exports;n.a.use(l.a);var I=new l.a({routes:[{path:"/",name:"HomePage",component:R},{path:"/favorites",name:"Favorites",component:U}]});r("Jmt5"),r("9M+g");n.a.use(o.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:I,store:f,render:function(e){return e(u)},beforeCreate:function(){this.$store.dispatch("initialize")}})},O6Qb:function(e,t){},YgWk:function(e,t){},c2hg:function(e,t){},zbdV:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5a87e32d9062d7b8135e.js.map